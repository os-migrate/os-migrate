<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Migration Parameters Guide &mdash; os-migrate  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How it works: Workload migration" href="how-it-works-workload-migration.html" />
    <link rel="prev" title="Variables Guide" href="variables-guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> os-migrate
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="README.html">OS Migrate User Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install-from-galaxy.html">Installation from Galaxy (recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-from-source.html">Installation from source (when customizing)</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">Upgrading</a></li>
<li class="toctree-l2"><a class="reference internal" href="walkthrough.html">OS Migrate Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage-notes.html">General usage notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables-guide.html">Variables Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Migration Parameters Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-are-migration-parameters">What are migration parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workload-migration-parameters">Workload migration parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-it-works-workload-migration.html">How it works: Workload migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Documented roles in os-migrate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Documented modules in os-migrate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/README.html">OS Migrate Developer Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">os-migrate</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="README.html">OS Migrate User Documentation</a> &raquo;</li>
      <li>Migration Parameters Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user/migration-params-guide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="migration-parameters-guide">
<h1>Migration Parameters Guide<a class="headerlink" href="#migration-parameters-guide" title="Permalink to this heading"></a></h1>
<section id="what-are-migration-parameters">
<h2>What are migration parameters<a class="headerlink" href="#what-are-migration-parameters" title="Permalink to this heading"></a></h2>
<p>Resource YAML files generated by OS Migrate when exporting are
editable by the user. The parameters in <code class="docutils literal notranslate"><span class="pre">params</span></code> section of a
resource generally specify direct resource properties, i.e. <em>what</em> the
resource is like. Sometimes, a resource can be copied from source to
destination in multiple different ways, each suitable for different
use cases. To control <em>how</em> an individual resource should be migrated,
there is another editable section in resource serializations, called
<code class="docutils literal notranslate"><span class="pre">_migration_params</span></code>. The descriptions of the most important ones are
in this guide.</p>
</section>
<section id="workload-migration-parameters">
<h2>Workload migration parameters<a class="headerlink" href="#workload-migration-parameters" title="Permalink to this heading"></a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">boot_disk_copy</span></code> controls how if the boot disk of the destination
server is copied or re-imaged:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code>: The destination server will be booted from a
Glance image of the same name as the source server. (This is the
default for servers which were booted from an image in the
source cloud.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code>: The source server’s boot disk will be copied
into the destination as a volume, and the destination server
will be created as boot-from-volume. (For servers which are
already boot-from-volume in the source cloud, this is the
default and the only possible path.)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_copy</span></code> controls storage migration modes for workloads:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code>: The copying of data using os-migrate is skipped.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code>: (Default) We result to using os-migrate for data copying.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">boot_volume_params</span></code> controls new boot disk creation parameters in
the destination, in case the source VM has no boot disk, but
<code class="docutils literal notranslate"><span class="pre">boot_disk_copy</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>There are a few pre-filled parameters, defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Then
<code class="docutils literal notranslate"><span class="pre">None</span></code> value means those parameters will not be specified when
creating the boot volume, or in case of the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter, the
default for workload migration will be used (prefix + VM name).</p>
<p>When the source VM <em>does</em> have a boot volume already, do not use
<code class="docutils literal notranslate"><span class="pre">boot_volume_params</span></code> to edit the destination creation
parameters. Instead, edit the serialized volume in the <code class="docutils literal notranslate"><span class="pre">volumes</span></code>
section of the workload’s <code class="docutils literal notranslate"><span class="pre">params</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">boot_volume</span></code> controls new boot disk creation parameters for
workload migrations with storage mode (data_copy) set to false.</p>
<p>There are a few pre-filled parameters, defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Then
<code class="docutils literal notranslate"><span class="pre">None</span></code> value means those parameters will not be specified when
creating the boot volume, or in case of the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter, the
default for workload migration will be used (prefix + VM name).</p>
<p>When the source VM <em>does</em> have a boot volume already, do not use
<code class="docutils literal notranslate"><span class="pre">boot_volume_params</span></code> to edit the destination creation
parameters. Instead, edit the serialized volume in the <code class="docutils literal notranslate"><span class="pre">volumes</span></code>
section of the workload’s <code class="docutils literal notranslate"><span class="pre">params</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">additional_volumes</span></code> any additonal volumes to be configured for
workload migrations with storage mode (data_copy) set to false.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">floating_ip_mode</span></code> controls whether and how floating IPs should be
created for workloads:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code>: Do not create any floating IPs on the destination
server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span></code>: Create a new floating IP (auto-assigned address).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">existing</span></code>: Assume the floating IP address as specified in
the workload serialization is already assigned to the
destination project, but not attached. Attach this floating
IP. If this is not possible for some reason, fail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code> (default): Attempt the <code class="docutils literal notranslate"><span class="pre">existing</span></code> method of floating
IP assignment first, but should it fail, fall back to the
<code class="docutils literal notranslate"><span class="pre">new</span></code> method instead.</p></li>
</ul>
<p>General remarks regarding floating IPs:</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">workloads.yml</span></code> export, each serialized floating IP
contains a <code class="docutils literal notranslate"><span class="pre">fixed_ip_address</span></code> property, so a floating IP will
be created on the port with this address. (When editing
ports/fixed addresses of a workload, make sure to also edit the
<code class="docutils literal notranslate"><span class="pre">fixed_ip_address</span></code> properties of its floating IPs accordingly.)</p>
<p>It is important to note that the address of a newly created
floating IP will be automatically selected by the cloud, it will
not match the floating IP address of the source server. (In most
cases, the floating IP ranges of src/dst clouds don’t overlap
anyway.)</p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="variables-guide.html" class="btn btn-neutral float-left" title="Variables Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="how-it-works-workload-migration.html" class="btn btn-neutral float-right" title="How it works: Workload migration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, os-migrate.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>